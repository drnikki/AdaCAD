<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>adacad-weaver documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	    <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">adacad-weaver documentation</a>
            <button type="button" class="btn btn-default btn-menu fa fa-bars" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <div id="book-search-input" role="search">
                <input type="text" placeholder="Type to search">
            </div>
            <nav>
            
                <ul class="list">
            
                    <li class="title">
                        <a href="../">adacad-weaver documentation</a>
                    </li>
            
                    <li class="divider"></li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                        <ul class="links">
                                <li class="link">
                                    <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                </li>
                                <li class="link">
                                    <a 
                                        
                                         href="../overview.html" 
                                         href="../overview.html" 
                                        >
                                        <span class="fa fa-th"></span>Overview
                                    </a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="./modules.html" >
                            <span class="fa fa-archive"></span>
                            <span>Modules</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-modules-links"
                            ></span>
                        </a>
                        <ul class="links collapse in"
                                id="xs-modules-links"
                            >
                                <li class="link">
                                    <a href="../modules/AppModule.html" >AppModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/AppRoutingModule.html" >AppRoutingModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/CoreModule.html" >CoreModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/MixerModule.html" >MixerModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/WeaverModule.html" >WeaverModule</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-cogs"></span>
                            <span>Components</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-components-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-components-links"
                            >
                                <li class="link">
                                    <a href="../components/AboutModal.html" >AboutModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ActionsComponent.html" >ActionsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/AppComponent.html" >AppComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ConnectionComponent.html" >ConnectionComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ConnectionModal.html" >ConnectionModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/DraftdetailComponent.html" >DraftdetailComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/DraftviewerComponent.html" >DraftviewerComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ImageComponent.html" >ImageComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/InitModal.html" >InitModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/LoomComponent.html" >LoomComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/LoomModal.html" >LoomModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MaterialModal.html" >MaterialModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MaterialsComponent.html" >MaterialsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MixerComponent.html" >MixerComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MixerDesignComponent.html" >MixerDesignComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MixerInitComponent.html" >MixerInitComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MixerPatternsComponent.html" >MixerPatternsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MixerViewComponent.html" >MixerViewComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MixerViewComponent.html" >MixerViewComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/MlModal.html" >MlModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/NoteComponent.html" >NoteComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/NotesComponent.html" >NotesComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/OpHelpModal.html" >OpHelpModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/OperationComponent.html" >OperationComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/OpsComponent.html" >OpsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/PaletteComponent.html" >PaletteComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/PatternModal.html" >PatternModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/PatternsComponent.html" >PatternsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SchematicComponent.html" >SchematicComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SelectionComponent.html" >SelectionComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ShuttlesModal.html" >ShuttlesModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SidebarComponent.html" >SidebarComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SnackbarComponent.html" >SnackbarComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SubdraftComponent.html" >SubdraftComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SystemsComponent.html" >SystemsComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/TabComponent.html" >TabComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/TopbarComponent.html" >TopbarComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/TreeComponent.html" >TreeComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/UploadFormComponent.html" >UploadFormComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/WeaverComponent.html" >WeaverComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/WeaverDesignComponent.html" >WeaverDesignComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/WeaverViewComponent.html" >WeaverViewComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/WeaverViewComponent.html" >WeaverViewComponent</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-code"></span>
                            <span>Directives</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-directives-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-directives-links"
                            >
                                <li class="link">
                                    <a href="../directives/MarqueeComponent.html" >MarqueeComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../directives/SelectionComponent.html" >SelectionComponent</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-file-code-o"></span>
                            <span>Classes</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-classes-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-classes-links"
                            >
                                <li class="link">
                                    <a href="../classes/AdaCADWeaverPage.html" >AdaCADWeaverPage</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Cell.html" >Cell</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Connection.html" >Connection</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Draft.html" >Draft</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Loom.html" >Loom</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Pattern.html" >Pattern</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Point.html" >Point</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Render.html" >Render</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Selection.html" >Selection</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Shape.html" >Shape</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Shuttle.html" >Shuttle</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/System.html" >System</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Timeline.html" >Timeline</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Upload.html" >Upload</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Util.html" >Util</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../routes.html" ><span class="fa fa-code-fork"></span>Routes</a>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-long-arrow-down"></span>
                            <span>Injectables</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-injectables-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-injectables-links"
                            >
                                <li class="link">
                                    <a href="../injectables/CollectionService.html" >CollectionService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/DesignmodesService.html" >DesignmodesService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/FileService.html" >FileService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/InkService.html" >InkService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/LayersService.html" >LayersService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/MaterialsService.html" >MaterialsService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/NotesService.html" >NotesService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/OperationService.html" >OperationService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/PatternService.html" >PatternService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/PatternfinderService.html" >PatternfinderService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/TreeService.html" >TreeService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/UploadService.html" >UploadService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/VaeService.html" >VaeService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/ViewportService.html" >ViewportService</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-info"></span>
                            <span>Interfaces</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-interfaces-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-interfaces-links"
                            >
                                <li class="link">
                                    <a href="../interfaces/Bounds.html" >Bounds</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/CxnComponentProxy.html" >CxnComponentProxy</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DensityUnits.html" >DensityUnits</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DesignActions.html" >DesignActions</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DesignMode.html" >DesignMode</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/DraftMap.html" >DraftMap</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/FileObj.html" >FileObj</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/FileSaver.html" >FileSaver</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Fileloader.html" >Fileloader</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/HistoryState.html" >HistoryState</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Ink.html" >Ink</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Interlacement.html" >Interlacement</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/InterlacementVal.html" >InterlacementVal</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/LoadResponse.html" >LoadResponse</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/LoomCoords.html" >LoomCoords</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/LoomTypes.html" >LoomTypes</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/LoomUpdate.html" >LoomUpdate</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/MaterialMap.html" >MaterialMap</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/MaterialTypes.html" >MaterialTypes</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/NodeComponentProxy.html" >NodeComponentProxy</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Note.html" >Note</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/OpComponentProxy.html" >OpComponentProxy</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Operation.html" >Operation</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/OperationClassification.html"  class="active" >OperationClassification</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/OperationParams.html" >OperationParams</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Point.html" >Point</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/SaveObj.html" >SaveObj</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/StartOptions.html" >StartOptions</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/StatusMessage.html" >StatusMessage</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/TreeNode.html" >TreeNode</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/TreeNodeProxy.html" >TreeNodeProxy</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/ViewModes.html" >ViewModes</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-plus"></span>
                            <span>Pipes</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-pipes-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-pipes-links"
                            >
                                <li class="link">
                                    <a href="../pipes/FilterPipe.html" >FilterPipe</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                    </li>
            
                    <li class="divider"></li>
                    <li class="copyright">
                            Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                        <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                            </a>
                    </li>
            
                </ul>
            
            </nav>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <nav>
                   
                       <ul class="list">
                   
                           <li class="title">
                               <a href="../">adacad-weaver documentation</a>
                           </li>
                   
                           <li class="divider"></li>
                   
                               <div id="book-search-input" role="search">
                                   <input type="text" placeholder="Type to search">
                               </div>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                               <ul class="links">
                                       <li class="link">
                                           <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                       </li>
                                       <li class="link">
                                           <a 
                                               
                                                href="../overview.html" 
                                                href="../overview.html" 
                                               >
                                               <span class="fa fa-th"></span>Overview
                                           </a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="./modules.html" >
                                   <span class="fa fa-archive"></span>
                                   <span>Modules</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#modules-links"
                                   ></span>
                               </a>
                               <ul class="links collapse in"
                                       id="modules-links"
                   >
                                       <li class="link">
                                           <a href="../modules/AppModule.html" >AppModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/AppRoutingModule.html" >AppRoutingModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/CoreModule.html" >CoreModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/MixerModule.html" >MixerModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/WeaverModule.html" >WeaverModule</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-cogs"></span>
                                   <span>Components</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#components-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="components-links"
                   >
                                       <li class="link">
                                           <a href="../components/AboutModal.html" >AboutModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ActionsComponent.html" >ActionsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/AppComponent.html" >AppComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ConnectionComponent.html" >ConnectionComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ConnectionModal.html" >ConnectionModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/DraftdetailComponent.html" >DraftdetailComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/DraftviewerComponent.html" >DraftviewerComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ImageComponent.html" >ImageComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/InitModal.html" >InitModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/LoomComponent.html" >LoomComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/LoomModal.html" >LoomModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MaterialModal.html" >MaterialModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MaterialsComponent.html" >MaterialsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MixerComponent.html" >MixerComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MixerDesignComponent.html" >MixerDesignComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MixerInitComponent.html" >MixerInitComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MixerPatternsComponent.html" >MixerPatternsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MixerViewComponent.html" >MixerViewComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MixerViewComponent.html" >MixerViewComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/MlModal.html" >MlModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/NoteComponent.html" >NoteComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/NotesComponent.html" >NotesComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/OpHelpModal.html" >OpHelpModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/OperationComponent.html" >OperationComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/OpsComponent.html" >OpsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/PaletteComponent.html" >PaletteComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/PatternModal.html" >PatternModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/PatternsComponent.html" >PatternsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SchematicComponent.html" >SchematicComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SelectionComponent.html" >SelectionComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ShuttlesModal.html" >ShuttlesModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SidebarComponent.html" >SidebarComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SnackbarComponent.html" >SnackbarComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SubdraftComponent.html" >SubdraftComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SystemsComponent.html" >SystemsComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/TabComponent.html" >TabComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/TopbarComponent.html" >TopbarComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/TreeComponent.html" >TreeComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/UploadFormComponent.html" >UploadFormComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/WeaverComponent.html" >WeaverComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/WeaverDesignComponent.html" >WeaverDesignComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/WeaverViewComponent.html" >WeaverViewComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/WeaverViewComponent.html" >WeaverViewComponent</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-code"></span>
                                   <span>Directives</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#directives-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="directives-links"
                   >
                                       <li class="link">
                                           <a href="../directives/MarqueeComponent.html" >MarqueeComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../directives/SelectionComponent.html" >SelectionComponent</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-file-code-o"></span>
                                   <span>Classes</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#classes-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="classes-links"
                   >
                                       <li class="link">
                                           <a href="../classes/AdaCADWeaverPage.html" >AdaCADWeaverPage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Cell.html" >Cell</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Connection.html" >Connection</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Draft.html" >Draft</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Loom.html" >Loom</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Pattern.html" >Pattern</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Point.html" >Point</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Render.html" >Render</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Selection.html" >Selection</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Shape.html" >Shape</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Shuttle.html" >Shuttle</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/System.html" >System</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Timeline.html" >Timeline</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Upload.html" >Upload</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Util.html" >Util</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../routes.html" ><span class="fa fa-code-fork"></span>Routes</a>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-long-arrow-down"></span>
                                   <span>Injectables</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#injectables-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="injectables-links"
                   >
                                       <li class="link">
                                           <a href="../injectables/CollectionService.html" >CollectionService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/DesignmodesService.html" >DesignmodesService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/FileService.html" >FileService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/InkService.html" >InkService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/LayersService.html" >LayersService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/MaterialsService.html" >MaterialsService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/NotesService.html" >NotesService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/OperationService.html" >OperationService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/PatternService.html" >PatternService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/PatternfinderService.html" >PatternfinderService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/TreeService.html" >TreeService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/UploadService.html" >UploadService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/VaeService.html" >VaeService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/ViewportService.html" >ViewportService</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-info"></span>
                                   <span>Interfaces</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#interfaces-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="interfaces-links"
                   >
                                       <li class="link">
                                           <a href="../interfaces/Bounds.html" >Bounds</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/CxnComponentProxy.html" >CxnComponentProxy</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DensityUnits.html" >DensityUnits</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DesignActions.html" >DesignActions</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DesignMode.html" >DesignMode</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/DraftMap.html" >DraftMap</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/FileObj.html" >FileObj</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/FileSaver.html" >FileSaver</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Fileloader.html" >Fileloader</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/HistoryState.html" >HistoryState</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Ink.html" >Ink</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Interlacement.html" >Interlacement</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/InterlacementVal.html" >InterlacementVal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/LoadResponse.html" >LoadResponse</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/LoomCoords.html" >LoomCoords</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/LoomTypes.html" >LoomTypes</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/LoomUpdate.html" >LoomUpdate</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/MaterialMap.html" >MaterialMap</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/MaterialTypes.html" >MaterialTypes</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/NodeComponentProxy.html" >NodeComponentProxy</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Note.html" >Note</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/OpComponentProxy.html" >OpComponentProxy</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Operation.html" >Operation</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/OperationClassification.html"  class="active" >OperationClassification</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/OperationParams.html" >OperationParams</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Point.html" >Point</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/SaveObj.html" >SaveObj</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/StartOptions.html" >StartOptions</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/StatusMessage.html" >StatusMessage</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/TreeNode.html" >TreeNode</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/TreeNodeProxy.html" >TreeNodeProxy</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/ViewModes.html" >ViewModes</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-plus"></span>
                                   <span>Pipes</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#pipes-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="pipes-links"
                   >
                                       <li class="link">
                                           <a href="../pipes/FilterPipe.html" >FilterPipe</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                           </li>
                   
                           <li class="divider"></li>
                           <li class="copyright">
                                   Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                               <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                                   </a>
                           </li>
                   
                       </ul>
                   
                   </nav>
               </div>
               <div class="content interface">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Interfaces</li>
  <li>OperationClassification</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
    <li class="active">
        <a href="#infos" id="infos-tab" role="tab" data-toggle="tab">Infos</a>
    </li>
    <li>
        <a href="#source" role="tab" id="source-tab" data-toggle="tab">Source</a>
    </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="infos">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/mixer/provider/operation.service.ts</code>
        </p>





            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <b>category</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>category:     <code>string</code>
</bcode>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code>string</code>

                                        </td>
                                    </tr>



                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <b>ops</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>ops:     <code>Operation[]</code>
</bcode>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code>Operation[]</code>

                                        </td>
                                    </tr>



                        </tbody>
                    </table>
            </section>
    </div>
    <div class="tab-pane fade tab-source-code" id="source">
        <pre><code class="hljs javascript">import { D, E } from &#x27;@angular/cdk/keycodes&#x27;;
import { Injectable, Input } from &#x27;@angular/core&#x27;;
import { Cell } from &#x27;../../core/model/cell&#x27;;
import { Draft } from &quot;../../core/model/draft&quot;;
import { VaeService} from &quot;../../core/provider/vae.service&quot;
import { PatternfinderService} from &quot;../../core/provider/patternfinder.service&quot;
import utilInstance from &#x27;../../core/model/util&#x27;;
import { Loom } from &#x27;../../core/model/loom&#x27;;

export interface OperationParams {
  name: string,
  min: number,
  max: number,
  value: number,
  dx: string
}

export interface Operation {
    name: string,
    dx: string,
    max_inputs: number,
    params: Array&lt;OperationParams&gt;,
    perform: (input: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; Promise&lt;Array&lt;Draft&gt;&gt;
 }

 export interface OperationClassification{
  category: string,
  ops: Array&lt;Operation&gt; 
 }
 

@Injectable({
  providedIn: &#x27;root&#x27;
})
export class OperationService {

  ops: Array&lt;Operation&gt; &#x3D; [];
  classification: Array&lt;OperationClassification&gt; &#x3D; [];

  constructor(private vae: VaeService, private pfs: PatternfinderService) { 

    const rect: Operation &#x3D; {
      name: &#x27;rectangle&#x27;,
      dx: &quot;generates a rectangle of the user specified side, if given an input, fills the rectangle with the input&quot;,
      params: [
        {name: &#x27;width&#x27;,
        min: 1,
        max: 500,
        value: 10,
        dx: &quot;width&quot;
        },
        {name: &#x27;height&#x27;,
        min: 1,
        max: 500,
        value: 10,
        dx: &quot;height&quot;
        }
      ],
      max_inputs: 1,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
        const outputs: Array&lt;Draft&gt; &#x3D; [];
        const d: Draft &#x3D; new Draft({warps: input_params[0], wefts: input_params[1]});
        
        if(inputs.length &#x3D;&#x3D; 0){
          d.fill([[new Cell(false)]], &#x27;clear&#x27;);
        }else{
          d.fill(inputs[0].pattern, &#x27;original&#x27;);
          d.updateWarpShuttlesFromPattern(inputs[0].colShuttleMapping);
          d.updateWeftShuttlesFromPattern(inputs[0].rowShuttleMapping);
          d.updateWarpSystemsFromPattern(inputs[0].colSystemMapping);
          d.updateWeftSystemsFromPattern(inputs[0].rowSystemMapping);

        }



        outputs.push(d);
        return Promise.resolve(outputs);
      }        
    }

    const clear: Operation &#x3D; {
      name: &#x27;clear&#x27;,
      dx: &quot;this sets all heddles to lifted, allowing it to be masked by any pattern&quot;,
      params: [],
      max_inputs: 1,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
        const outputs: Array&lt;Draft&gt; &#x3D; inputs.map(draft &#x3D;&gt; {
          const d: Draft &#x3D; new Draft({warps: draft.warps, wefts:draft.wefts});
          d.fill([[new Cell(false)]], &#x27;clear&#x27;);
          if(inputs.length &gt; 0){
            d.updateWarpShuttlesFromPattern(inputs[0].colShuttleMapping);
            d.updateWeftShuttlesFromPattern(inputs[0].rowShuttleMapping);
            d.updateWarpSystemsFromPattern(inputs[0].colSystemMapping);
            d.updateWeftSystemsFromPattern(inputs[0].rowSystemMapping);
          }
          return  d;
        });
        return Promise.resolve(outputs);
      }        
    }

    const set: Operation &#x3D; {
      name: &#x27;set unset to down&#x27;,
      dx: &quot;this sets all unset heddles in this draft to heddle downs (white squares)&quot;,
      params: [],
      max_inputs: 1,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;)&#x3D;&gt; {
        const outputs: Array&lt;Draft&gt; &#x3D; inputs.map(draft &#x3D;&gt; {
          const d: Draft &#x3D; new Draft({warps: draft.warps, wefts:draft.wefts});
          draft.pattern.forEach((row, i) &#x3D;&gt; {
            row.forEach((cell, j) &#x3D;&gt; {
              if(!cell.isSet()) d.pattern[i][j] &#x3D; new Cell(false);
              else d.pattern[i][j] &#x3D; new Cell(cell.isUp());
            });
          });
          if(inputs.length &gt; 0){
            d.updateWarpShuttlesFromPattern(inputs[0].colShuttleMapping);
            d.updateWeftShuttlesFromPattern(inputs[0].rowShuttleMapping);
            d.updateWarpSystemsFromPattern(inputs[0].colSystemMapping);
            d.updateWeftSystemsFromPattern(inputs[0].rowSystemMapping);
          }
          return d;
        });
        return Promise.resolve(outputs);
      }        
    }

    const unset: Operation &#x3D; {
      name: &#x27;set down to unset&#x27;,
      dx: &quot;this sets all down heddles in this draft to unset&quot;,
      params: [],
      max_inputs: 1,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
        const outputs: Array&lt;Draft&gt; &#x3D; inputs.map(draft &#x3D;&gt; {
          const d: Draft &#x3D; new Draft({warps: draft.warps, wefts:draft.wefts});
          draft.pattern.forEach((row, i) &#x3D;&gt; {
            row.forEach((cell, j) &#x3D;&gt; {
              if(!cell.isUp() &amp;&amp; cell.isSet()) d.pattern[i][j] &#x3D; new Cell(null);
              else d.pattern[i][j] &#x3D; new Cell(cell.getHeddle());
            });
          });
          if(inputs.length &gt; 0){
            d.updateWarpShuttlesFromPattern(inputs[0].colShuttleMapping);
            d.updateWeftShuttlesFromPattern(inputs[0].rowShuttleMapping);
            d.updateWarpSystemsFromPattern(inputs[0].colSystemMapping);
            d.updateWeftSystemsFromPattern(inputs[0].rowSystemMapping);
          }
          return d;
        });
        return Promise.resolve(outputs);
      }        
    }

    const rotate: Operation &#x3D; {
      name: &#x27;rotate&#x27;,
      dx: &quot;this turns the draft by 90 degrees but leaves materials in same place&quot;,
      params: [],
      max_inputs: 1,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
        const outputs: Array&lt;Draft&gt; &#x3D; inputs.map(draft &#x3D;&gt; {
          const d: Draft &#x3D; new Draft({warps: draft.wefts, wefts:draft.warps});
          //get each column from the input, save it as the ror in the output

          for(var r &#x3D; 0; r &lt; draft.warps; r++){
            const col: Array&lt;Cell&gt; &#x3D; draft.pattern.map(row &#x3D;&gt; row[r]);
            col.forEach((cell, i) &#x3D;&gt; {
              d.pattern[r][i].setHeddle(cell.getHeddle());
            });
          }

          if(inputs.length &gt; 0){
            d.updateWarpShuttlesFromPattern(inputs[0].colShuttleMapping);
            d.updateWeftShuttlesFromPattern(inputs[0].rowShuttleMapping);
            d.updateWarpSystemsFromPattern(inputs[0].colSystemMapping);
            d.updateWeftSystemsFromPattern(inputs[0].rowSystemMapping);
          }

          return d;
        });
        return Promise.resolve(outputs);
      }        
    }

    /**TO DO - handle materials */
    const interlace:Operation &#x3D; {
      name: &#x27;interlace&#x27;,
      dx: &#x27;interlace the input drafts together in alternating lines&#x27;,
      params: [],
      max_inputs: 100,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
        
        const outputs: Array&lt;Draft&gt; &#x3D; [];

        const max_wefts:number &#x3D; utilInstance.getMaxWefts(inputs);
        const max_warps:number &#x3D; utilInstance.getMaxWarps(inputs);
        const rowSystems: Array&lt;Array&lt;number&gt;&gt; &#x3D; inputs.map(el &#x3D;&gt; el.rowSystemMapping);
       
        const uniqueSystemRows: Array&lt;Array&lt;number&gt;&gt; &#x3D; utilInstance.makeSystemsUnique(rowSystems);

        //create a draft to hold the merged values
        const d:Draft &#x3D; new Draft({warps: max_warps, wefts:(max_wefts * inputs.length)});

        d.pattern.forEach((row, ndx) &#x3D;&gt; {
            const select_array: number &#x3D; ndx % inputs.length; 
            const select_row: number &#x3D; Math.floor(ndx / inputs.length);
            row.forEach((cell, j) &#x3D;&gt;{
                if(inputs[select_array].hasCell(select_row, j)){
                    cell.setHeddle(inputs[select_array].pattern[select_row][j].getHeddle());
                }else{
                    cell.setHeddle(null);
                }

                d.colShuttleMapping[j] &#x3D; inputs[select_array].colShuttleMapping[j];
                d.colSystemMapping[j] &#x3D; inputs[select_array].colSystemMapping[j];

                //this should throw an error if all drafts are using different warp colorings.
            });
            d.rowShuttleMapping[ndx] &#x3D; inputs[select_array].rowShuttleMapping[select_row];
            d.rowSystemMapping[ndx] &#x3D; uniqueSystemRows[select_array][select_row];

        });

        outputs.push(d);
        return Promise.resolve(outputs);
      }     
    }

    const selvedge: Operation &#x3D; {
      name: &#x27;selvedge&#x27;,
      dx: &#x27;adds a selvedge of a user defined with both sides of the input draft. User can specify the number of row repeats in the selvedge&#x27;,
      params: [
        {name: &#x27;width&#x27;,
        min: 1,
        max: 100,
        value: 12,
        dx: &quot;the width in warps of the selvedge&quot;
        },
        {name: &#x27;repeats&#x27;,
        min: 1,
        max: 100,
        value: 1,
        dx: &quot;the number of pics to repeat each selvedge structure, usually equal to the number of shuttles thrown&quot;
        }
      ],
      max_inputs: 1,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;)&#x3D;&gt; {

        const height &#x3D; 2*input_params[1];

        const pattern:Array&lt;Array&lt;Cell&gt;&gt; &#x3D; [];
        for(let i &#x3D; 0; i &lt; height; i++){
          pattern.push([]);
          let alt: boolean &#x3D;  i &lt; input_params[1];
          for(let j &#x3D; 0; j &lt; 2; j++){
            pattern[i][j] &#x3D; ((alt &amp;&amp; j%2 &#x3D;&#x3D;0) || (!alt &amp;&amp; j%2 &#x3D;&#x3D;1)) ? new Cell(true) : new Cell(false);
          }
        }

        let outputs: Array&lt;Draft&gt; &#x3D; [];
        if(inputs.length &#x3D;&#x3D; 0){
          const d: Draft &#x3D; new Draft({warps: input_params[0]*2, wefts: height});
          d.fill(pattern, &#x27;original&#x27;);
          outputs.push(d);
        }else{
           outputs &#x3D; inputs.map(input &#x3D;&gt; {
            const d: Draft &#x3D; new Draft({warps: input.warps + input_params[0]*2, wefts: input.wefts});
            d.fill(pattern, &#x27;original&#x27;);
            if(inputs.length &gt; 0){
              d.updateWarpShuttlesFromPattern(inputs[0].colShuttleMapping);
              d.updateWeftShuttlesFromPattern(inputs[0].rowShuttleMapping);
              d.updateWarpSystemsFromPattern(inputs[0].colSystemMapping);
              d.updateWeftSystemsFromPattern(inputs[0].rowSystemMapping);
            }
            for(let i &#x3D; 0; i &lt; input.wefts; i++){
              for(let j &#x3D; 0; j &lt; input.warps; j++){
                d.pattern[i][j+input_params[0]].setHeddle(input.pattern[i][j].getHeddle()) ;
              }
            }

            return d;
          });
        }

        return Promise.resolve(outputs);
      }        
    }

    const overlay: Operation &#x3D; {
      name: &#x27;overlay&#x27;,
      dx: &#x27;overlays the two drafts together. offsets the second (and further drafts) by the input values&#x27;,
      params: [
        {name: &#x27;left offset&#x27;,
        min: 0,
        max: 10000,
        value: 0,
        dx: &quot;the amount to offset the added inputs from the left&quot;
        },
        {name: &#x27;top offset&#x27;,
        min: 0,
        max: 10000,
        value: 0,
        dx: &quot;the amount to offset the overlaying inputs from the top&quot;
        }
      ],
      max_inputs: 100,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;)&#x3D;&gt; {

        if(inputs.length &lt; 1) return Promise.resolve([]);

        const first: Draft &#x3D; inputs.shift();

        const outputs: Array&lt;Draft&gt; &#x3D; [];


        let width: number &#x3D; utilInstance.getMaxWarps(inputs) + input_params[0];
        let height: number &#x3D; utilInstance.getMaxWefts(inputs) + input_params[1];
        if(first.warps &gt; width) width &#x3D; first.warps;
        if(first.wefts &gt; height) height &#x3D; first.wefts;


        //initialize the base container with the first draft at 0,0, unset for anythign wider
        const init_draft: Draft &#x3D; new Draft({wefts: height, warps: width});
          
        first.pattern.forEach((row, i) &#x3D;&gt; {
            row.forEach((cell, j) &#x3D;&gt; {
              init_draft.pattern[i][j].setHeddle(cell.getHeddle());
            });
          });

        //now merge in all of the additional inputs offset by the inputs
        const d: Draft &#x3D; inputs.reduce((acc, input) &#x3D;&gt; {
          input.pattern.forEach((row, i) &#x3D;&gt; {
            row.forEach((cell, j) &#x3D;&gt; {
              //if i or j is less than input params 
              const adj_i: number &#x3D; i+input_params[1];
              const adj_j: number &#x3D; j+input_params[0];
              acc.pattern[adj_i][adj_j].setHeddle(utilInstance.computeFilter(&#x27;or&#x27;, cell.getHeddle(), acc.pattern[adj_i][adj_j].getHeddle()));
            });
          });
          return acc;

        }, init_draft);
        outputs.push(d);
        return Promise.resolve(outputs);
      }        
    }

    const atop: Operation &#x3D; {
      name: &#x27;set atop&#x27;,
      dx: &#x27;sets the drafts on top of eachother, with the first draft on bottom and remaining on top&#x27;,
      params: [
        {name: &#x27;left offset&#x27;,
        min: 0,
        max: 10000,
        value: 0,
        dx: &quot;the amount to offset the added inputs from the left&quot;
        },
        {name: &#x27;top offset&#x27;,
        min: 0,
        max: 10000,
        value: 0,
        dx: &quot;the amount to offset the overlaying inputs from the top&quot;
        }
      ],
      max_inputs: 100,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {

        if(inputs.length &lt; 1) return Promise.resolve([]);

        const first: Draft &#x3D; inputs.shift();

        const outputs: Array&lt;Draft&gt; &#x3D; [];


        let width: number &#x3D; utilInstance.getMaxWarps(inputs) + input_params[0];
        let height: number &#x3D; utilInstance.getMaxWefts(inputs) + input_params[1];
        if(first.warps &gt; width) width &#x3D; first.warps;
        if(first.wefts &gt; height) height &#x3D; first.wefts;

        //initialize the base container with the first draft at 0,0, unset for anythign wider
        const init_draft: Draft &#x3D; new Draft({wefts: height, warps: width});
          
        first.pattern.forEach((row, i) &#x3D;&gt; {
            row.forEach((cell, j) &#x3D;&gt; {
              init_draft.pattern[i][j].setHeddle(cell.getHeddle());
            });
          });

        //now merge in all of the additional inputs offset by the inputs
        const d: Draft &#x3D; inputs.reduce((acc, input) &#x3D;&gt; {
          input.pattern.forEach((row, i) &#x3D;&gt; {
            row.forEach((cell, j) &#x3D;&gt; {
              //if i or j is less than input params 
              const adj_i: number &#x3D; i+input_params[1];
              const adj_j: number &#x3D; j+input_params[0];
              acc.pattern[adj_i][adj_j].setHeddle(utilInstance.computeFilter(&#x27;up&#x27;, cell.getHeddle(), acc.pattern[adj_i][adj_j].getHeddle()));
            });
          });
          return acc;

        }, init_draft);
        outputs.push(d);
        return Promise.resolve(outputs);
      }        
    }

    const knockout: Operation &#x3D; {
      name: &#x27;knockout&#x27;,
      dx: &#x27;overlays the input drafts. Flips the value of overlapping cells of the same value, effectively knocking out the image of the second draft upon the first&#x27;,
      params: [
        {name: &#x27;left offset&#x27;,
        min: 0,
        max: 10000,
        value: 0,
        dx: &quot;the amount to offset the added inputs from the left&quot;
        },
        {name: &#x27;top offset&#x27;,
        min: 0,
        max: 10000,
        value: 0,
        dx: &quot;the amount to offset the overlaying inputs from the top&quot;
        }
      ],
      max_inputs: 100,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;)&#x3D;&gt; {

        if(inputs.length &lt; 1) return Promise.resolve([]);

        const first: Draft &#x3D; inputs.shift();

        const outputs: Array&lt;Draft&gt; &#x3D; [];


        let width: number &#x3D; utilInstance.getMaxWarps(inputs) + input_params[0];
        let height: number &#x3D; utilInstance.getMaxWefts(inputs) + input_params[1];
        if(first.warps &gt; width) width &#x3D; first.warps;
        if(first.wefts &gt; height) height &#x3D; first.wefts;

        //initialize the base container with the first draft at 0,0, unset for anythign wider
        const init_draft: Draft &#x3D; new Draft({wefts: height, warps: width});
          
        first.pattern.forEach((row, i) &#x3D;&gt; {
            row.forEach((cell, j) &#x3D;&gt; {
              init_draft.pattern[i][j].setHeddle(cell.getHeddle());
            });
          });

        //now merge in all of the additional inputs offset by the inputs
        const d: Draft &#x3D; inputs.reduce((acc, input) &#x3D;&gt; {
          input.pattern.forEach((row, i) &#x3D;&gt; {
            row.forEach((cell, j) &#x3D;&gt; {
              //if i or j is less than input params 
              const adj_i: number &#x3D; i+input_params[1];
              const adj_j: number &#x3D; j+input_params[0];
              acc.pattern[adj_i][adj_j].setHeddle(utilInstance.computeFilter(&#x27;neq&#x27;, cell.getHeddle(), acc.pattern[adj_i][adj_j].getHeddle()));
            });
          });
          return acc;

        }, init_draft);
        outputs.push(d);
        return Promise.resolve(outputs);
      }        
    }

    const mask: Operation &#x3D; {
      name: &#x27;mask&#x27;,
      dx: &#x27;only shows areas of the first draft that are marked as &quot;up&quot; in the second draft&#x27;,
      params: [
        {name: &#x27;left offset&#x27;,
        min: 0,
        max: 10000,
        value: 0,
        dx: &quot;the amount to offset the added inputs from the left&quot;
        },
        {name: &#x27;top offset&#x27;,
        min: 0,
        max: 10000,
        value: 0,
        dx: &quot;the amount to offset the overlaying inputs from the top&quot;
        }
      ],
      max_inputs: 100,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {

        if(inputs.length &lt; 1) return Promise.resolve([]);

        const first: Draft &#x3D; inputs.shift();

        const outputs: Array&lt;Draft&gt; &#x3D; [];


        let width: number &#x3D; utilInstance.getMaxWarps(inputs) + input_params[0];
        let height: number &#x3D; utilInstance.getMaxWefts(inputs) + input_params[1];
        if(first.warps &gt; width) width &#x3D; first.warps;
        if(first.wefts &gt; height) height &#x3D; first.wefts;

        //initialize the base container with the first draft at 0,0, unset for anythign wider
        const init_draft: Draft &#x3D; new Draft({wefts: height, warps: width});
          
        first.pattern.forEach((row, i) &#x3D;&gt; {
            row.forEach((cell, j) &#x3D;&gt; {
              init_draft.pattern[i][j].setHeddle(cell.getHeddle());
            });
          });

        //now merge in all of the additional inputs offset by the inputs
        const d: Draft &#x3D; inputs.reduce((acc, input) &#x3D;&gt; {
          input.pattern.forEach((row, i) &#x3D;&gt; {
            row.forEach((cell, j) &#x3D;&gt; {
              //if i or j is less than input params 
              const adj_i: number &#x3D; i+input_params[1];
              const adj_j: number &#x3D; j+input_params[0];
              acc.pattern[adj_i][adj_j].setHeddle(utilInstance.computeFilter(&#x27;and&#x27;, cell.getHeddle(), acc.pattern[adj_i][adj_j].getHeddle()));
            });
          });
          return acc;

        }, init_draft);
        outputs.push(d);
        return Promise.resolve(outputs);
      }        
    }

    const erase: Operation &#x3D; {
      name: &#x27;erase&#x27;,
      dx: &#x27;erases  areas of the first draft that are marked as &quot;up&quot; in the second draft&#x27;,
      params: [
        {name: &#x27;left offset&#x27;,
        min: 0,
        max: 10000,
        value: 0,
        dx: &quot;the amount to offset the added inputs from the left&quot;
        },
        {name: &#x27;top offset&#x27;,
        min: 0,
        max: 10000,
        value: 0,
        dx: &quot;the amount to offset the overlaying inputs from the top&quot;
        }
      ],
      max_inputs: 100,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {

        if(inputs.length &lt; 1) return Promise.resolve([]);

        const first: Draft &#x3D; inputs.shift();

        const outputs: Array&lt;Draft&gt; &#x3D; [];


        let width: number &#x3D; utilInstance.getMaxWarps(inputs) + input_params[0];
        let height: number &#x3D; utilInstance.getMaxWefts(inputs) + input_params[1];
        if(first.warps &gt; width) width &#x3D; first.warps;
        if(first.wefts &gt; height) height &#x3D; first.wefts;

        //initialize the base container with the first draft at 0,0, unset for anythign wider
        const init_draft: Draft &#x3D; new Draft({wefts: height, warps: width});
          
        first.pattern.forEach((row, i) &#x3D;&gt; {
            row.forEach((cell, j) &#x3D;&gt; {
              init_draft.pattern[i][j].setHeddle(cell.getHeddle());
            });
          });

        //now merge in all of the additional inputs offset by the inputs
        const d: Draft &#x3D; inputs.reduce((acc, input) &#x3D;&gt; {
          input.pattern.forEach((row, i) &#x3D;&gt; {
            row.forEach((cell, j) &#x3D;&gt; {
              //if i or j is less than input params 
              const adj_i: number &#x3D; i+input_params[1];
              const adj_j: number &#x3D; j+input_params[0];
              acc.pattern[adj_i][adj_j].setHeddle(utilInstance.computeFilter(&#x27;down&#x27;, cell.getHeddle(), acc.pattern[adj_i][adj_j].getHeddle()));
            });
          });
          return acc;

        }, init_draft);
        outputs.push(d);
        return Promise.resolve(outputs);
      }        
    }


    const fill: Operation &#x3D; {
      name: &#x27;fill&#x27;,
      dx: &#x27;fills black cells of the first input with the pattern specified by the second input, white cells with third input&#x27;,
      params: [],
      max_inputs: 3,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
        let outputs: Array&lt;Draft&gt; &#x3D; [];

        if(inputs.length &#x3D;&#x3D; 0){
          outputs.push(new Draft({warps:0, wefts: 0}));
        }

        if(inputs.length &#x3D;&#x3D; 1){
          outputs.push(new Draft({warps:inputs[0].warps, wefts: inputs[0].wefts, pattern:inputs[0].pattern}));
        }

        if(inputs.length &#x3D;&#x3D; 2){
          let d &#x3D; new Draft({warps:inputs[0].warps, wefts: inputs[0].wefts, pattern:inputs[0].pattern});
          d.fill(inputs[1].pattern, &#x27;mask&#x27;);
          outputs.push(d);
        }

        if(inputs.length &#x3D;&#x3D; 3){
          let d &#x3D; new Draft({warps:inputs[0].warps, wefts: inputs[0].wefts, pattern:inputs[0].pattern});
          let di &#x3D; new Draft({warps:inputs[0].warps, wefts: inputs[0].wefts, pattern:inputs[0].pattern});
          di.fill(inputs[0].pattern, &#x27;invert&#x27;);
          di.fill(inputs[2].pattern, &#x27;mask&#x27;);
          d.fill(inputs[1].pattern, &#x27;mask&#x27;);

          const op: Operation &#x3D; this.getOp(&#x27;overlay&#x27;);

        
          op.perform([d, di], [0, 0])
            .then(out &#x3D;&gt; {
              outputs.push(out[0]);
            });

          // op.perform([d, di], [0, 0]);
          // outputs.push(out[0]);


        }



        return Promise.resolve(outputs);
      }        
    }

    const tabby: Operation &#x3D; {
      name: &#x27;tabby&#x27;,
      dx: &#x27;generates or fills input a draft with tabby structure&#x27;,
      params: [],
      max_inputs: 1,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {


        const pattern:Array&lt;Array&lt;Cell&gt;&gt; &#x3D; [];
        for(let i &#x3D; 0; i &lt; 2; i++){
          pattern.push([]);
          for(let j &#x3D; 0; j &lt; 2; j++){
            pattern[i][j] &#x3D; (i &#x3D;&#x3D; j) ? new Cell(true) : new Cell(false);
          }
        }

        let outputs: Array&lt;Draft&gt; &#x3D; [];
        if(inputs.length &#x3D;&#x3D; 0){
          const d: Draft &#x3D; new Draft({warps: 2, wefts: 2, pattern: pattern});
          outputs.push(d);
        }else{
           outputs &#x3D; inputs.map(input &#x3D;&gt; {
            const d: Draft &#x3D; new Draft({warps: input.warps, wefts: input.wefts, pattern: input.pattern});
            d.fill(pattern, &#x27;mask&#x27;);
              d.updateWarpShuttlesFromPattern(inputs[0].colShuttleMapping);
              d.updateWeftShuttlesFromPattern(inputs[0].rowShuttleMapping);
              d.updateWarpSystemsFromPattern(inputs[0].colSystemMapping);
              d.updateWeftSystemsFromPattern(inputs[0].rowSystemMapping);
            return d;
          });
        }

        return Promise.resolve(outputs);
      }        
    }

    const basket: Operation &#x3D; {
      name: &#x27;basket&#x27;,
      dx: &#x27;generates a basket structure defined by the inputs&#x27;,
      params: [
        {name: &#x27;unders&#x27;,
        min: 1,
        max: 100,
        value: 2,
        dx: &#x27;number of weft unders&#x27;
        },
        {name: &#x27;overs&#x27;,
        min: 1,
        max: 100,
        value: 2,
        dx: &#x27;number of weft overs&#x27;
        }
      ],
      max_inputs: 1,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {


        const sum: number &#x3D; input_params.reduce( (acc, val) &#x3D;&gt; {
            return val + acc;
        }, 0);

        let alt_rows, alt_cols, val: boolean &#x3D; false;
        const pattern:Array&lt;Array&lt;Cell&gt;&gt; &#x3D; [];
        for(let i &#x3D; 0; i &lt; sum; i++){
          alt_rows &#x3D; (i % sum &lt; input_params[0]);
          pattern.push([]);
          for(let j &#x3D; 0; j &lt; sum; j++){
            alt_cols &#x3D; (j % sum &lt; input_params[0]);
            val &#x3D; (alt_cols &amp;&amp; alt_rows) || (!alt_cols &amp;&amp; !alt_rows);
            pattern[i][j] &#x3D;  new Cell(val);
          }
        }

        let outputs: Array&lt;Draft&gt; &#x3D; [];
        if(inputs.length &#x3D;&#x3D; 0){
          const d: Draft &#x3D; new Draft({warps: sum, wefts: sum, pattern: pattern});
          outputs.push(d);
        }else{
          outputs &#x3D; inputs.map(input &#x3D;&gt; {
            const d: Draft &#x3D; new Draft({warps: input.warps, wefts: input.wefts, pattern: input.pattern});
            d.fill(pattern, &#x27;mask&#x27;);
            return d;
          });
        }

        return Promise.resolve(outputs);
      }
          
    }


    const stretch: Operation &#x3D; {
      name: &#x27;stretch&#x27;,
      dx: &#x27;repeats each warp and/or weft by the inputs&#x27;,
      params: [
        {name: &#x27;warp repeats&#x27;,
        min: 1,
        max: 100,
        value: 2,
        dx: &#x27;number of times to repeat each warp&#x27;
        },
        {name: &#x27;weft repeats&#x27;,
        min: 1,
        max: 100,
        value: 2,
        dx: &#x27;number of weft overs in a pic&#x27;
        }
      ],
      max_inputs: 1,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {

        const outputs: Array&lt;Draft&gt; &#x3D; inputs.map(input &#x3D;&gt; {
            const d: Draft &#x3D; new Draft({warps: input_params[0]*input.warps, wefts: input_params[1]*input.wefts});
            input.pattern.forEach((row, i) &#x3D;&gt; {
              for(let p &#x3D; 0; p &lt; input_params[1]; p++){
                let i_ndx &#x3D; input_params[1] * i + p;
                row.forEach((cell, j) &#x3D;&gt; {
                  for(let r &#x3D; 0; r &lt; input_params[0]; r++){
                    let j_ndx &#x3D; input_params[0] * j + r;
                    d.pattern[i_ndx][j_ndx].setHeddle(cell.getHeddle());
                  }
                });

              }
            });

            return d;
        });

        return Promise.resolve(outputs);
      }
          
    }

    const resize: Operation &#x3D; {
      name: &#x27;resize&#x27;,
      dx: &#x27;stretches or squishes the draft to fit the boundary&#x27;,
      params: [
        {name: &#x27;warps&#x27;,
        min: 1,
        max: 10000,
        value: 2,
        dx: &#x27;number of warps to resize to&#x27;
        },
        {name: &#x27;weft repeats&#x27;,
        min: 1,
        max: 10000,
        value: 2,
        dx: &#x27;number of wefts to resize to&#x27;
        }
      ],
      max_inputs: 1,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {

        const outputs: Array&lt;Draft&gt; &#x3D; inputs.map(input &#x3D;&gt; {
          const weft_factor &#x3D;input_params[1] /input.wefts ;
          const warp_factor &#x3D; input_params[0] / input.warps;
          const d: Draft &#x3D; new Draft({warps: input_params[0], wefts: input_params[1]});
            d.pattern.forEach((row, i) &#x3D;&gt; {
                row.forEach((cell, j) &#x3D;&gt; {
                    const mapped_cell: Cell &#x3D; input.pattern[Math.floor(i/weft_factor)][Math.floor(j/warp_factor)];
                    d.pattern[i][j].setHeddle(mapped_cell.getHeddle());
                
                });
            });

            return d;
        });

        return Promise.resolve(outputs);
      }
          
    }

    const margin: Operation &#x3D; {
      name: &#x27;margin&#x27;,
      dx: &#x27;adds padding of unset cells to the top, right, bottom, left of the block&#x27;,
      params: [
        {name: &#x27;top&#x27;,
        min: 1,
        max: 10000,
        value: 1,
        dx: &#x27;number of pics of padding to add to the top&#x27;
        },
        {name: &#x27;right&#x27;,
        min: 1,
        max: 10000,
        value: 1,
        dx: &#x27;number of pics of padding to add to the right&#x27;
        },
        {name: &#x27;bottom&#x27;,
        min: 1,
        max: 10000,
        value: 1,
        dx: &#x27;number of pics of padding to add to the bottom&#x27;
        },
        {name: &#x27;left&#x27;,
        min: 1,
        max: 10000,
        value: 1,
        dx: &#x27;number of pics of padding to add to the left&#x27;
        }
      ],
      max_inputs: 1,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {

        const outputs: Array&lt;Draft&gt; &#x3D; inputs.map(input &#x3D;&gt; {
            const new_warps &#x3D; input_params[1] + input_params[3] + input.warps;
            const new_wefts &#x3D; input_params[0] + input_params[2] + input.wefts;

            const d: Draft &#x3D; new Draft({warps: new_warps, wefts: new_wefts});

            //unset all cells to default
            d.pattern.forEach((row, i) &#x3D;&gt; {
              row.forEach((cell, j) &#x3D;&gt; {
                d.pattern[i][j].unsetHeddle();
              });
            });
            input.pattern.forEach((row, i) &#x3D;&gt; {
                row.forEach((cell, j) &#x3D;&gt; {
                  d.pattern[i+input_params[0]][j+input_params[3]].setHeddle(cell.getHeddle());
                });
            });

            return d;
        });

        return Promise.resolve(outputs);
      }
          
    }

    const crop: Operation &#x3D; {
      name: &#x27;crop&#x27;,
      dx: &#x27;crops to a region of the input draft. The crop size and placement is given by the parameters&#x27;,
      params: [
        {name: &#x27;left&#x27;,
        min: 0,
        max: 10000,
        value: 0,
        dx: &#x27;number of pics from the left to start the cut&#x27;
        },
        {name: &#x27;top&#x27;,
        min: 0,
        max: 10000,
        value: 0,
        dx: &#x27;number of pics from the top to start the cut&#x27;
        },
        {name: &#x27;width&#x27;,
        min: 1,
        max: 10000,
        value: 10,
        dx: &#x27;total width of cut&#x27;
        },
        {name: &#x27;height&#x27;,
        min: 1,
        max: 10000,
        value: 10,
        dx: &#x27;height of the cutting box&#x27;
        }
      ],
      max_inputs: 1,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {



        const outputs: Array&lt;Draft&gt; &#x3D; inputs.map(input &#x3D;&gt; {
            const new_warps &#x3D; input_params[2];
            const new_wefts &#x3D; input_params[3];

            const d: Draft &#x3D; new Draft({warps: new_warps, wefts: new_wefts});

            //unset all cells to default
            d.pattern.forEach((row, i) &#x3D;&gt; {
              row.forEach((cell, j) &#x3D;&gt; {

                if((i+input_params[1] &gt;&#x3D; input.pattern.length) || (j+input_params[0] &gt;&#x3D; input.pattern[0].length)) cell.setHeddle(null);
                else cell.setHeddle(input.pattern[i+input_params[1]][j+input_params[0]].getHeddle());
               
              });
            });

            return d;
        });

        return Promise.resolve(outputs);
      }
          
    }
    
    const rib: Operation &#x3D; {
      name: &#x27;rib&#x27;,
      dx: &#x27;generates a rib/cord/half-basket structure defined by the inputs&#x27;,
      params: [
        {name: &#x27;unders&#x27;,
        min: 1,
        max: 100,
        value: 2,
        dx: &#x27;number of weft unders in a pic&#x27;
        },
        {name: &#x27;overs&#x27;,
        min: 1,
        max: 100,
        value: 2,
        dx: &#x27;number of weft overs in a pic&#x27;
        },
        {name: &#x27;repeats&#x27;,
        min: 1,
        max: 100,
        value: 1,
        dx: &#x27;number of weft pics to repeat within the structure&#x27;
        }
      ],
      max_inputs: 1,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {


        const sum: number &#x3D; input_params[0] + input_params[1];
        const repeats: number &#x3D; input_params[2];
        const width: number &#x3D; sum;
        const height: number &#x3D; repeats * 2;

        let alt_rows, alt_cols, val: boolean &#x3D; false;
        const pattern:Array&lt;Array&lt;Cell&gt;&gt; &#x3D; [];
        for(let i &#x3D; 0; i &lt; height; i++){
          alt_rows &#x3D; (i &lt; repeats);
          pattern.push([]);
          for(let j &#x3D; 0; j &lt; width; j++){
            alt_cols &#x3D; (j % sum &lt; input_params[0]);
            val &#x3D; (alt_cols &amp;&amp; alt_rows) || (!alt_cols &amp;&amp; !alt_rows);
            pattern[i][j] &#x3D;  new Cell(val);
          }
        }

        let outputs: Array&lt;Draft&gt; &#x3D; [];
        if(inputs.length &#x3D;&#x3D; 0){
          const d: Draft &#x3D; new Draft({warps: width, wefts: height, pattern: pattern});
          outputs.push(d);
        }else{
          outputs &#x3D; inputs.map(input &#x3D;&gt; {
            const d: Draft &#x3D; new Draft({warps: input.warps, wefts: input.wefts, pattern: input.pattern});
            d.fill(pattern, &#x27;mask&#x27;);
            return d;
          });
        }

        return Promise.resolve(outputs);
      }
          
    }

    const twill: Operation &#x3D; {
      name: &#x27;twill&#x27;,
      dx: &#x27;generates or fills with a twill structure described by the inputs&#x27;,
      params: [
        {name: &#x27;unders&#x27;,
        min: 1,
        max: 100,
        value: 1,
        dx: &#x27;number of weft unders&#x27;
        },
        {name: &#x27;overs&#x27;,
        min: 1,
        max: 100,
        value: 3,
        dx: &#x27;number of weft overs&#x27;
        },
        {name: &#x27;direction&#x27;,
        min: 0,
        max: 1,
        value: 0,
        dx: &#x27;0 for S, 1 for Z&#x27;
        }
      ],
      max_inputs: 1,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {

        let sum: number &#x3D; input_params.reduce( (acc, val) &#x3D;&gt; {
            return val + acc;
        }, 0);

        sum -&#x3D; input_params[2];

        const pattern:Array&lt;Array&lt;Cell&gt;&gt; &#x3D; [];
        for(let i &#x3D; 0; i &lt; sum; i++){
          pattern.push([]);
          for(let j &#x3D; 0; j &lt; sum; j++){
            pattern[i][(j+i)%sum] &#x3D; (j &lt; input_params[0]) ? new Cell(true) : new Cell(false);
          }
        }

        let outputs: Array&lt;Draft&gt; &#x3D; [];
        if(inputs.length &#x3D;&#x3D; 0){
          const d: Draft &#x3D; new Draft({warps: sum, wefts: sum, pattern: pattern});
          outputs.push(d);
        }else{
           outputs &#x3D; inputs.map(input &#x3D;&gt; {
            const d: Draft &#x3D; new Draft({warps: input.warps, wefts: input.wefts, pattern: input.pattern});
            d.fill(pattern, &#x27;mask&#x27;);
            return d;
          });
        }

        if(input_params[2] &#x3D;&#x3D;&#x3D; 1){
          return this.getOp(&#x27;flip horiz&#x27;).perform(outputs, []);
        }else{
          return Promise.resolve(outputs);
        }
      }        
    }

    

    const satin: Operation &#x3D; {
      name: &#x27;satin&#x27;,
      dx: &#x27;generates or fills with a satin structure described by the inputs&#x27;,
      params: [
        {name: &#x27;repeat&#x27;,
        min: 5,
        max: 100,
        value: 5,
        dx: &#x27;the width and height of the pattern&#x27;
        },
        {name: &#x27;move&#x27;,
        min: 1,
        max: 100,
        value: 2,
        dx: &#x27;the move number on each row&#x27;
        }
      ],
      max_inputs: 1,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
       

        const pattern:Array&lt;Array&lt;Cell&gt;&gt; &#x3D; [];
        for(let i &#x3D; 0; i &lt; input_params[0]; i++){
          pattern.push([]);
          for(let j &#x3D; 0; j &lt; input_params[0]; j++){
            pattern[i][j] &#x3D; (j&#x3D;&#x3D;&#x3D;(i*input_params[1])%input_params[0]) ? new Cell(true) : new Cell(false);
          }
        }

        let outputs: Array&lt;Draft&gt; &#x3D; [];
        if(inputs.length &#x3D;&#x3D;&#x3D; 0){
          const d: Draft &#x3D; new Draft({warps: input_params[0], wefts: input_params[0], pattern: pattern});
          outputs.push(d);
        }else{
           outputs &#x3D; inputs.map(input &#x3D;&gt; {
            const d: Draft &#x3D; new Draft({warps: input.warps, wefts: input.wefts, pattern: input.pattern});
            d.fill(pattern, &#x27;mask&#x27;);
            return d;
          });
        }
              
      
        return Promise.resolve(outputs);
        // return inputs.map(input &#x3D;&gt; {
        //   return input;
        // })

        // const shift: number &#x3D; Math.ceil(input_params[1]/2);

        // return this.getOp(&#x27;twill&#x27;).perform(inputs, input_params)
        //   .then(d &#x3D;&gt; {
        //     return Promise.resolve(this.getOp(&#x27;slope&#x27;).perform(d, [shift, 1]));
        //   })
        
      }        
    }

    const random: Operation &#x3D; {
      name: &#x27;random&#x27;,
      dx: &#x27;generates a random draft with width, height, and percetage of weft unders defined by inputs&#x27;,
      params: [
        {name: &#x27;width&#x27;,
        min: 1,
        max: 100,
        value: 6,
        dx: &#x27;the width of this structure&#x27;
        },
        {name: &#x27;height&#x27;,
        min: 1,
        max: 100,
        value: 6,
        dx: &#x27;the height of this structure&#x27;
        },
        {name: &#x27;percent weft unders&#x27;,
        min: 1,
        max: 100,
        value: 50,
        dx: &#x27;percentage of weft unders to be used&#x27;
        }
      ],
      max_inputs: 1,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
       
        const pattern:Array&lt;Array&lt;Cell&gt;&gt; &#x3D; [];
        for(let i &#x3D; 0; i &lt; input_params[1]; i++){
          pattern.push([]);
          for(let j &#x3D; 0; j &lt; input_params[0]; j++){
            const rand: number &#x3D; Math.random() * 100;
            pattern[i][j] &#x3D; (rand &gt; input_params[2]) ? new Cell(false) : new Cell(true);
          }
        }

        let outputs: Array&lt;Draft&gt; &#x3D; [];
        if(inputs.length &#x3D;&#x3D; 0){
          const d: Draft &#x3D; new Draft({warps: input_params[0], wefts: input_params[1], pattern: pattern});
          outputs.push(d);
        }else{
           outputs &#x3D; inputs.map(input &#x3D;&gt; {
            const d: Draft &#x3D; new Draft({warps: input.warps, wefts: input.wefts, pattern: input.pattern});
            d.fill(pattern, &#x27;mask&#x27;);
            return d;
          });
        }

        return Promise.resolve(outputs);
      }        
    }

    const invert: Operation &#x3D; {
      name: &#x27;invert&#x27;,
      dx: &#x27;generates an output that is the inverse or backside of the input&#x27;,
      params: [],
      max_inputs: 1, 
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
          const outputs:Array&lt;Draft&gt; &#x3D; inputs.map(input &#x3D;&gt; {
          const d: Draft &#x3D; new Draft({warps: input.warps, wefts: input.wefts, pattern: input.pattern});
          d.fill(d.pattern, &#x27;invert&#x27;);
          return d;
        });
        return Promise.resolve(outputs);
      }
    }

    const flipx: Operation &#x3D; {
      name: &#x27;flip horiz&#x27;,
      dx: &#x27;generates an output that is the left-right mirror of the input&#x27;,
      params: [],
      max_inputs: 1, 
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
          const outputs:Array&lt;Draft&gt; &#x3D; inputs.map(input &#x3D;&gt; {
          const d: Draft &#x3D; new Draft({warps: input.warps, wefts: input.wefts, pattern: input.pattern});
          d.fill(d.pattern, &#x27;mirrorY&#x27;);
          return d;
        });
        return  Promise.resolve(outputs);
      }
    }

    const flipy: Operation &#x3D; {
      name: &#x27;flip vert&#x27;,
      dx: &#x27;generates an output that is the top-bottom mirror of the input&#x27;,
      params: [],
      max_inputs: 1, 
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;)&#x3D;&gt; {
          const outputs:Array&lt;Draft&gt; &#x3D; inputs.map(input &#x3D;&gt; {
          const d: Draft &#x3D; new Draft({warps: input.warps, wefts: input.wefts, pattern: input.pattern});
          d.fill(d.pattern, &#x27;mirrorX&#x27;);
          return d;
        });
        return  Promise.resolve(outputs);
      }
    }

    const shiftx: Operation &#x3D; {
      name: &#x27;shift left&#x27;,
      dx: &#x27;generates an output that is shifted left by the number of warps specified in the inputs&#x27;,
      params: [
        {name: &#x27;amount&#x27;,
        min: 1,
        max: 100,
        value: 1,
        dx: &#x27;the amount of warps to shift by&#x27;
        }
      ],
      max_inputs: 1, 
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;)&#x3D;&gt; {
          
          const outputs:Array&lt;Draft&gt; &#x3D; inputs.map(input &#x3D;&gt; {
          const d: Draft &#x3D; new Draft({warps: input.warps, wefts: input.wefts, pattern: input.pattern});
            for(let i &#x3D; 0; i &lt; input_params[0]; i++){
              d.fill(d.pattern, &#x27;shiftLeft&#x27;);
            }
          return d;
        });
        return  Promise.resolve(outputs);
      }
    }

    const shifty: Operation &#x3D; {
      name: &#x27;shift up&#x27;,
      dx: &#x27;generates an output that is shifted up by the number of wefts specified in the inputs&#x27;,
      params: [
        {name: &#x27;amount&#x27;,
        min: 1,
        max: 100,
        value: 1,
        dx: &#x27;the number of wefts to shift by&#x27;
        }
      ],
      max_inputs: 1, 
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
          
          const outputs:Array&lt;Draft&gt; &#x3D; inputs.map(input &#x3D;&gt; {
          const d: Draft &#x3D; new Draft({warps: input.warps, wefts: input.wefts, pattern: input.pattern});
            for(let i &#x3D; 0; i &lt; input_params[0]; i++){
              d.fill(d.pattern, &#x27;shiftUp&#x27;);
            }
          return d;
        });
        return  Promise.resolve(outputs);
      }
    }

    const slope: Operation &#x3D; {
      name: &#x27;slope&#x27;,
      dx: &#x27;offsets every nth row by the vaule given in col&#x27;,
      params: [
        {name: &#x27;col shift&#x27;,
        min: -100,
        max: 100,
        value: 1,
        dx: &#x27;the amount to shift rows by&#x27;
        },
        {name: &#x27;row shift (n)&#x27;,
        min: 0,
        max: 100,
        value: 1,
        dx: &#x27;describes how many rows we should apply the shift to&#x27;
        }
      ],
      max_inputs: 1, 
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
          
          const outputs:Array&lt;Draft&gt; &#x3D; inputs.map(input &#x3D;&gt; {
          const d: Draft &#x3D; new Draft({warps: input.warps, wefts: input.wefts});
          for(let i &#x3D; 0; i &lt; d.wefts; i++){
            
              let i_shift: number &#x3D; (input_params[1] &#x3D;&#x3D;&#x3D; 0) ? 0 : Math.floor(i/input_params[1]);
              for(let j &#x3D; 0; j &lt;d.warps; j++){
                let j_shift: number &#x3D; input_params[0]*-1;
                let shift_total &#x3D; (i_shift * j_shift)%d.warps;
                if(shift_total &lt; 0) shift_total +&#x3D; d.warps;
                
                d.pattern[i][j].setHeddle(input.pattern[i][(j+shift_total)%d.warps].getHeddle());
              }
            }
          return d;
        });
        return  Promise.resolve(outputs);
      }
    }


    const replicate: Operation &#x3D; {
      name: &#x27;mirror&#x27;,
      dx: &#x27;generates an linked copy of the input draft, changes to the input draft will then populate on the replicated draft&#x27;,
      params: [ {
        name: &#x27;copies&#x27;,
        min: 1,
        max: 100,
        value: 1,
        dx: &#x27;the number of mirrors to produce&#x27;
      }],
      max_inputs: 1, 
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
        
        

        let outputs:Array&lt;Draft&gt; &#x3D; [];

        for(let i &#x3D; 0; i &lt; input_params[0]; i++){
            const ds:Array&lt;Draft&gt; &#x3D; inputs.map(input &#x3D;&gt; {
              const d: Draft &#x3D; new Draft({warps: input.warps, wefts: input.wefts, pattern: input.pattern});
              return d;
            });
            outputs &#x3D; outputs.concat(ds);
        }
        return  Promise.resolve(outputs);
      }
    }

    const variants: Operation &#x3D; {
      name: &#x27;variants&#x27;,
      dx: &#x27;for any input draft, create the shifted and flipped values as well&#x27;,
      params: [],
      max_inputs: 1, 
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
        
        if(inputs.length &#x3D;&#x3D; 0)  return  Promise.resolve([]);

        const functions: Array&lt;Promise&lt;Array&lt;Draft&gt;&gt;&gt; &#x3D; [
        this.getOp(&#x27;flip horiz&#x27;).perform(inputs, input_params),
        this.getOp(&#x27;invert&#x27;).perform(inputs, input_params)]

        for(let i &#x3D; 1; i &lt; inputs[0].warps; i+&#x3D;2){
          functions.push(this.getOp(&#x27;shift left&#x27;).perform(inputs, [i]))
        }

        for(let i &#x3D; 1; i &lt; inputs[0].wefts; i+&#x3D;2){
          functions.push(this.getOp(&#x27;shift up&#x27;).perform(inputs, [i]))
        }
        return Promise.all(functions)
        .then(allDrafts &#x3D;&gt; allDrafts
          .reduce((acc, drafts) &#x3D;&gt; acc.concat(drafts), [])
         )        
      }


    }

    const bindweftfloats: Operation &#x3D; {
      name: &#x27;bind weft floats&#x27;,
      dx: &#x27;adds interlacements to weft floats over the user specified length&#x27;,
      params: [
        {name: &#x27;length&#x27;,
        min: 1,
        max: 100,
        value: 10,
        dx: &#x27;the maximum length of a weft float&#x27;
        }
      ],
      max_inputs: 1, 
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
          
          const outputs:Array&lt;Draft&gt; &#x3D; inputs.map(input &#x3D;&gt; {
          const d: Draft &#x3D; new Draft({warps: input.warps, wefts: input.wefts, pattern: input.pattern});
          let float: number &#x3D; 0;
          let last:boolean &#x3D; false;
          d.pattern.forEach(row &#x3D;&gt; {
            float &#x3D; 0;
            last &#x3D; null;
            row.forEach(c &#x3D;&gt; {

              if(c.getHeddle &#x3D;&#x3D; null) float &#x3D; 0;
              if(last !&#x3D; null &amp;&amp; c.getHeddle() &#x3D;&#x3D; last) float++;

              if(float &gt;&#x3D; input_params[0]){
                c.toggleHeddle();
                float &#x3D; 0;
              }
              last &#x3D; c.getHeddle();
            });
          });

          return d;
        });
        return  Promise.resolve(outputs);
      }
    }

    const bindwarpfloats: Operation &#x3D; {
      name: &#x27;bind warp floats&#x27;,
      dx: &#x27;adds interlacements to warp floats over the user specified length&#x27;,
      params: [
        {name: &#x27;length&#x27;,
        min: 1,
        max: 100,
        value: 10,
        dx: &#x27;the maximum length of a warp float&#x27;
        }
      ],
      max_inputs: 1, 
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
          
          const outputs:Array&lt;Draft&gt; &#x3D; inputs.map(input &#x3D;&gt; {
          const d: Draft &#x3D; new Draft({warps: input.warps, wefts: input.wefts, pattern: input.pattern});
          let float: number &#x3D; 0;
          let last:boolean &#x3D; false;

          for(let j &#x3D; 0; j &lt; d.warps; j++){
            const col: Array&lt;Cell&gt; &#x3D; d.pattern.map(row &#x3D;&gt; row[j]);
            float &#x3D; 0;
            last &#x3D; null;
            col.forEach(c &#x3D;&gt; {

              if(c.getHeddle &#x3D;&#x3D; null) float &#x3D; 0;
              if(last !&#x3D; null &amp;&amp; c.getHeddle() &#x3D;&#x3D; last) float++;

              if(float &gt;&#x3D; input_params[0]){
                c.toggleHeddle();
                float &#x3D; 0;
              }
              last &#x3D; c.getHeddle();
            });
          }

          return d;
        });
        return  Promise.resolve(outputs);
      }
    }

    const layer: Operation &#x3D; {
      name: &#x27;layer&#x27;,
      dx: &#x27;creates a draft in which each input is assigned to a layer in a multilayered structure, assigns 1 to top layer and so on&#x27;,
      params: [],
      max_inputs: 100, 
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;)&#x3D;&gt; {
          
          const layers &#x3D; inputs.length;
          if(layers &#x3D;&#x3D; 0) return Promise.resolve([]);

          const max_wefts:number &#x3D; utilInstance.getMaxWefts(inputs);
          const max_warps:number &#x3D; utilInstance.getMaxWarps(inputs);



          //set&#x27;s base pattern that assigns warp 1...n to layers 1...n 
          const pattern: Array&lt;Array&lt;Cell&gt;&gt; &#x3D; [];
          for(let i &#x3D; 0; i &lt; layers; i++){
            pattern.push([]);
            for(let j &#x3D; 0; j &lt; layers; j++){
              let val: boolean &#x3D; (j &lt; i) ? true : false; 
              pattern[i].push(new Cell(val));
            }
          }


          return this.getOp(&#x27;interlace&#x27;).perform(inputs, [])
            .then(overlay &#x3D;&gt; {
              const d: Draft &#x3D; new Draft({warps: max_warps*layers, wefts: max_wefts*layers});
              d.fill(pattern, &quot;original&quot;);
  
              overlay[0].pattern.forEach((row, ndx) &#x3D;&gt; {
                const layer_id:number &#x3D; ndx % layers;
                row.forEach((c, j) &#x3D;&gt; {
                  d.pattern[ndx][j*layers+layer_id].setHeddle(c.getHeddle());
                });
              });
              return  Promise.resolve([d]);
            });
      }
      
    }

    const tile: Operation &#x3D; {
      name: &#x27;tile&#x27;,
      dx: &#x27;repeats this block along the warp and weft&#x27;,
      params: [
        {name: &#x27;warp-repeats&#x27;,
        min: 1,
        max: 100,
        value: 2,
        dx: &#x27;the number of times to repeat this time across the width&#x27;
        },
        {name: &#x27;weft-repeats&#x27;,
        min: 1,
        max: 100,
        value: 2,
        dx: &#x27;the number of times to repeat this time across the length&#x27;
        }
      ],
      max_inputs: 1,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {

        const outputs:Array&lt;Draft&gt; &#x3D; inputs.map(input &#x3D;&gt; {
          const width: number &#x3D; input_params[0]*input.warps;
          const height: number &#x3D; input_params[1]*input.wefts;

          const d: Draft &#x3D; new Draft({warps: width, wefts: height});
          d.fill(input.pattern, &#x27;original&#x27;);
          return d;
        });

        return Promise.resolve(outputs);
      }
          
    }

    const jointop: Operation &#x3D; {
      name: &#x27;join top&#x27;,
      dx: &#x27;attaches inputs toether into one draft in a column orientation&#x27;,
      params: [],
      max_inputs: 100, 
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
          
        const total:number &#x3D; inputs.reduce((acc, draft)&#x3D;&gt;{
            return acc + draft.wefts;
        }, 0);

        const max_warps:number &#x3D; utilInstance.getMaxWarps(inputs);
        
        const combined: {d: Draft, n: number} &#x3D; inputs.reduce((acc, input, ndx) &#x3D;&gt; {

          input.pattern.forEach((row, i) &#x3D;&gt; {
            row.forEach((cell, j) &#x3D;&gt; {
              acc.d.pattern[acc.n + i][j].setHeddle(cell.getHeddle());
            });
          });

          acc.n &#x3D; input.pattern.length;
          return acc;

        }, {d: new Draft({warps: max_warps, wefts: total}), n: 0});


        return Promise.resolve([combined.d]);
        
      }
    }


    const joinleft: Operation &#x3D; {
      name: &#x27;join left&#x27;,
      dx: &#x27;attaches inputs toether into one draft with each iniput side by side&#x27;,
      params: [],
      max_inputs: 100, 
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
          
        const outputs: Array&lt;Draft&gt; &#x3D; [];
        const total:number &#x3D; inputs.reduce((acc, draft)&#x3D;&gt;{
            return acc + draft.warps;
        }, 0);

        const max_wefts:number &#x3D; utilInstance.getMaxWefts(inputs);
        
        const d: Draft &#x3D; new Draft({warps: total, wefts: max_wefts});
        for(let i &#x3D; 0; i &lt; max_wefts; i++){
            const combined_rows: Array&lt;Cell&gt; &#x3D; inputs.reduce((acc, draft) &#x3D;&gt; {
             
              let  r: Array&lt;Cell&gt; &#x3D; [];
              //if the draft doesn&#x27;t have this row, just make a blank one
              if(i &gt;&#x3D; draft.wefts){
                const nd &#x3D; new Draft({warps: draft.warps, wefts: 1});
                r &#x3D; nd.pattern[0];
              }
              else r &#x3D;  draft.pattern[i];
              return acc.concat(r);
            }, []);
            
          
            combined_rows.forEach((cell,j) &#x3D;&gt; {
              d.pattern[i][j].setHeddle(cell.getHeddle());
            });
        }
             
        outputs.push(d);
        return Promise.resolve(outputs);
        ;
      }
    }

    const germanify: Operation &#x3D; {
      name: &#x27;gemanify&#x27;,
      dx: &#x27;uses ML to edit the input based on patterns in a german drafts weave set&#x27;,
      params: [
        {name: &#x27;output selection&#x27;,
        min: 1,
        max: 10,
        value: 1,
        dx: &#x27;which pattern to select from the variations&#x27;
        }
      ],
      max_inputs: 1,
      perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
        if(inputs.length &#x3D;&#x3D;&#x3D; 0) return Promise.resolve([]);
        const inputDraft &#x3D; inputs[0]
  
        return this.vae.loadModels(&#x27;german&#x27;)
          .then(() &#x3D;&gt; {
            const loom:Loom &#x3D; new Loom(inputDraft, 8, 10);
            loom.recomputeLoom(inputDraft);
            let pattern &#x3D; this.pfs.computePatterns(loom.threading, loom.treadling, inputDraft.pattern);
          
            return utilInstance.patternToSize(pattern, 48, 48);
          })
          .then(draftSeed&#x3D;&gt; this.vae.generateFromSeed(draftSeed))
          .then(suggestions &#x3D;&gt; suggestions.map(suggestion &#x3D;&gt; {
                  const treadlingSuggest &#x3D; this.pfs.getTreadlingFromArr(suggestion);
                  const threadingSuggest &#x3D; this.pfs.getThreadingFromArr(suggestion);
                  const pattern &#x3D; this.pfs.computePatterns(threadingSuggest, treadlingSuggest, suggestion)
                  const draft:Draft &#x3D; new Draft({warps: pattern[0].length, wefts: pattern.length});
                    for (var i &#x3D; 0; i &lt; pattern.length; i++) {
                      for (var j &#x3D; 0; j &lt; pattern[i].length; j++) {
                          draft.pattern[i][j].setHeddle((pattern[i][j] &#x3D;&#x3D; 1 ? true : false));
                      }
                    }
                  return draft
                
                })
              )
        }
      }  
      const crackleify: Operation &#x3D; {
        name: &#x27;crackle-ify&#x27;,
        dx: &#x27;uses ML to edit the input based on patterns in a german drafts weave set&#x27;,
        params: [
          {name: &#x27;output selection&#x27;,
          min: 1,
          max: 10,
          value: 1,
          dx: &#x27;which pattern to select from the variations&#x27;
          }
        ],
        max_inputs: 1,
        perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
          if(inputs.length &#x3D;&#x3D;&#x3D; 0) return Promise.resolve([]);
          const inputDraft &#x3D; inputs[0]
    
          return this.vae.loadModels(&#x27;crackle_weave&#x27;)
            .then(() &#x3D;&gt; {
              const loom:Loom &#x3D; new Loom(inputDraft, 8, 10);
              loom.recomputeLoom(inputDraft);
              let pattern &#x3D; this.pfs.computePatterns(loom.threading, loom.treadling, inputDraft.pattern);
            
              return utilInstance.patternToSize(pattern, 52, 52);
            })
            .then(draftSeed&#x3D;&gt; this.vae.generateFromSeed(draftSeed))
            .then(suggestions &#x3D;&gt; suggestions.map(suggestion &#x3D;&gt; {
                    const treadlingSuggest &#x3D; this.pfs.getTreadlingFromArr(suggestion);
                    const threadingSuggest &#x3D; this.pfs.getThreadingFromArr(suggestion);
                    const pattern &#x3D; this.pfs.computePatterns(threadingSuggest, treadlingSuggest, suggestion)
                    const draft:Draft &#x3D; new Draft({warps: pattern[0].length, wefts: pattern.length});
                      for (var i &#x3D; 0; i &lt; pattern.length; i++) {
                        for (var j &#x3D; 0; j &lt; pattern[i].length; j++) {
                            draft.pattern[i][j].setHeddle((pattern[i][j] &#x3D;&#x3D; 1 ? true : false));
                        }
                      }
                    return draft
                  
                  })
                )
          }
        }  
        
        
        const makeloom: Operation &#x3D; {
          name: &#x27;floor loom&#x27;,
          dx: &#x27;uses the input draft as drawdown and generates a threading, tieup and treadling pattern&#x27;,
          params: [

          ],
          max_inputs: 1,
          perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
            if(inputs.length &#x3D;&#x3D;&#x3D; 0) return Promise.resolve([]);
            
            const l:Loom &#x3D; new Loom(inputs[0], 8, 10);
            l.recomputeLoom(inputs[0]);

            const threading: Draft &#x3D; new Draft({warps: inputs[0].warps, wefts: l.num_frames});
            threading.name &#x3D; &quot;threading_&quot;+inputs[0].name;

            l.threading.forEach((frame, j) &#x3D;&gt;{
              console.log(&quot;looping&quot;, frame, j)
              if(frame !&#x3D;&#x3D; -1) threading.pattern[frame][j].setHeddle(true);
            });

            const treadling: Draft &#x3D; new Draft({warps:l.num_treadles, wefts: inputs[0].wefts});
            console.log(treadling);
            l.treadling.forEach((treadle_num, i) &#x3D;&gt;{
              if(treadle_num !&#x3D;&#x3D; -1) treadling.pattern[i][treadle_num].setHeddle(true);
            });
            treadling.name &#x3D; &quot;treadling_&quot;+inputs[0].name;

            const tieup: Draft &#x3D; new Draft({warps: l.num_treadles, wefts: l.num_frames});
            l.tieup.forEach((row, i) &#x3D;&gt; {
              row.forEach((val, j) &#x3D;&gt; {
                tieup.pattern[i][j].setHeddle(val);
              })
            });
            tieup.name &#x3D; &quot;tieup_&quot;+inputs[0].name;


            return Promise.resolve([threading, tieup, treadling]);

            }


            

          } 
          
          const drawdown: Operation &#x3D; {
            name: &#x27;drawdown&#x27;,
            dx: &#x27;create a drawdown from the input drafts (order 1. threading, 2. tieup, 3.treadling)&#x27;,
            params: [
  
            ],
            max_inputs: 3,
            perform: (inputs: Array&lt;Draft&gt;, input_params: Array&lt;number&gt;) &#x3D;&gt; {
              if(inputs.length &lt; 3) return Promise.resolve([]);

              
              const threading: Array&lt;number&gt; &#x3D; [];
              for(let j &#x3D; 0; j &lt; inputs[0].warps; j++){
                const col: Array&lt;Cell&gt; &#x3D;  inputs[0].pattern.reduce((acc, row, ndx) &#x3D;&gt; {
                  acc[ndx] &#x3D; row[j];
                  return acc;
                }, []);

                threading[j] &#x3D; col.findIndex(cell &#x3D;&gt; cell.getHeddle());

              }
            
              const treadling: Array&lt;number&gt; &#x3D; inputs[2].pattern
              .map(row &#x3D;&gt; row.findIndex(cell &#x3D;&gt; cell.getHeddle()));

              const tieup &#x3D; inputs[1].pattern.map(row &#x3D;&gt; {
                return row.map(cell &#x3D;&gt; cell.getHeddle());
              });

              const drawdown: Draft &#x3D; new Draft({warps: inputs[0].warps, wefts: inputs[2].wefts});
              drawdown.recalculateDraft(tieup, treadling, threading);
              return Promise.resolve([drawdown]);
  
              }
  
  
  
            }
    


    //**push operatiinos to the array here */
    this.ops.push(rect);
    this.ops.push(twill);
    this.ops.push(satin);
    this.ops.push(tabby);
    this.ops.push(basket);
    this.ops.push(rib);
    this.ops.push(random);
    this.ops.push(interlace);
    this.ops.push(invert);
   this.ops.push(replicate);
    this.ops.push(flipx);
    this.ops.push(flipy);
    this.ops.push(shiftx);
    this.ops.push(shifty);
    this.ops.push(layer);
    this.ops.push(selvedge);
    this.ops.push(bindweftfloats);
    this.ops.push(bindwarpfloats);
    this.ops.push(joinleft);
    this.ops.push(jointop);
    this.ops.push(slope);
    this.ops.push(tile);
    this.ops.push(stretch);
    this.ops.push(resize);
    this.ops.push(margin);
    this.ops.push(clear);
    this.ops.push(set);
    this.ops.push(unset);
    this.ops.push(rotate);
    this.ops.push(fill);
    this.ops.push(overlay);
    this.ops.push(atop);
    this.ops.push(mask);
    this.ops.push(germanify);
    this.ops.push(crackleify);
    this.ops.push(variants);
    this.ops.push(knockout);
    this.ops.push(crop);
    this.ops.push(makeloom);
    this.ops.push(drawdown);


    //** Give it a classification here */
    this.classification.push(
      {category: &#x27;block design&#x27;,
      ops: [rect, clear, set, unset]
    }
    );

    this.classification.push(
      {category: &#x27;structures&#x27;,
      ops: [tabby, twill, satin, basket, rib, random, variants]}
    );

    this.classification.push(
      {category: &#x27;transformations&#x27;,
      ops: [fill, invert, flipx, flipy, shiftx, shifty, rotate, slope, stretch, resize, margin, crop]}
    );

    this.classification.push(
      {category: &#x27;compose&#x27;,
      ops: [interlace, layer, tile, joinleft, jointop, selvedge, atop, overlay, mask, knockout, bindweftfloats, bindwarpfloats]}
    );

    this.classification.push(
      {category: &#x27;machine learning&#x27;,
      ops: [germanify, crackleify]}
    );


    this.classification.push(
      {category: &#x27;frame loom support&#x27;,
      ops: [makeloom, drawdown]}
    );

  }


  getOp(name: string): Operation{
    const ndx: number &#x3D; this.ops.findIndex(el &#x3D;&gt; el.name &#x3D;&#x3D;&#x3D; name);
    return this.ops[ndx];
  }
}
</code></pre>
    </div>
</div>




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
           </div>
       </div>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/search/search.js"></script>
       <script src="../js/search/lunr.min.js"></script>
       <script src="../js/search/search-lunr.js"></script>

       <script src="../js/menu.js"></script>
       <script src="../js/libs/highlight.pack.js"></script>
       <script src="../js/libs/highlightjs-line-numbers.min.js"></script>
       <script src="../js/search/search_index.js"></script>
       <script>
            document.addEventListener('DOMContentLoaded', function() {
                hljs.initHighlightingOnLoad();
                hljs.initLineNumbersOnLoad();
            });
       </script>

    </body>
</html>
